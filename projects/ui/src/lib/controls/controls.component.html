<form [formGroup]="form" class="controls-form">
  <!-- Seed Section -->
  <section class="controls-section">
    <h3 class="section-title">Seed</h3>
    <div class="form-group">
      <label for="seed">Random Seed:</label>
      <div class="seed-group">
        <input
          id="seed"
          type="number"
          formControlName="seed"
          readonly
          class="form-control seed-input"
        />
        <button
          type="button"
          (click)="onGenerateNewSeed()"
          class="btn btn-secondary"
          [disabled]="isRunning"
        >
          Generate New
        </button>
      </div>
    </div>
  </section>

  <!-- Node Counts Section -->
  <section class="controls-section">
    <h3 class="section-title">Node Counts</h3>
    <div formGroupName="nodeCounts">
      <div class="form-group">
        <label for="mechanismNodes">Mechanism Nodes (10-200):</label>
        <input
          id="mechanismNodes"
          type="number"
          formControlName="mechanism"
          class="form-control"
          min="10"
          max="200"
        />
        <span class="error" *ngIf="hasError('nodeCounts.mechanism', 'min')">
          Must be at least 10
        </span>
        <span class="error" *ngIf="hasError('nodeCounts.mechanism', 'max')">
          Must be at most 200
        </span>
      </div>

      <div class="form-group">
        <label for="p2pNodes">P2P Nodes (10-200):</label>
        <input
          id="p2pNodes"
          type="number"
          formControlName="p2p"
          class="form-control"
          min="10"
          max="200"
        />
        <span class="error" *ngIf="hasError('nodeCounts.p2p', 'min')">
          Must be at least 10
        </span>
        <span class="error" *ngIf="hasError('nodeCounts.p2p', 'max')">
          Must be at most 200
        </span>
      </div>
    </div>
  </section>

  <!-- Phase Budgets Section -->
  <section class="controls-section">
    <h3 class="section-title">Phase Budgets</h3>
    <div formGroupName="phaseBudgets">
      <div class="form-group">
        <label for="setupBudget">Setup Budget (1-100):</label>
        <input
          id="setupBudget"
          type="number"
          formControlName="setup"
          class="form-control"
          min="1"
          max="100"
        />
        <span class="error" *ngIf="hasError('phaseBudgets.setup', 'min')">
          Must be at least 1
        </span>
        <span class="error" *ngIf="hasError('phaseBudgets.setup', 'max')">
          Must be at most 100
        </span>
      </div>

      <div class="form-group">
        <label for="runBudget">Run Budget (1-1000):</label>
        <input
          id="runBudget"
          type="number"
          formControlName="run"
          class="form-control"
          min="1"
          max="1000"
        />
        <span class="error" *ngIf="hasError('phaseBudgets.run', 'min')">
          Must be at least 1
        </span>
        <span class="error" *ngIf="hasError('phaseBudgets.run', 'max')">
          Must be at most 1000
        </span>
      </div>
    </div>
  </section>

  <!-- Advanced Section -->
  <section class="controls-section">
    <h3 class="section-title">Advanced</h3>
    <div class="form-group">
      <label for="p2pDegree">P2P Degree (1-20):</label>
      <input
        id="p2pDegree"
        type="number"
        formControlName="p2pDegree"
        class="form-control"
        min="1"
        max="20"
      />
      <span class="error" *ngIf="hasError('p2pDegree', 'min')">
        Must be at least 1
      </span>
      <span class="error" *ngIf="hasError('p2pDegree', 'max')">
        Must be at most 20
      </span>
    </div>

    <div class="form-group">
      <label for="epsilon">Epsilon (0.001-0.5):</label>
      <input
        id="epsilon"
        type="number"
        formControlName="epsilon"
        class="form-control"
        min="0.001"
        max="0.5"
        step="0.001"
      />
      <span class="error" *ngIf="hasError('epsilon', 'min')">
        Must be at least 0.001
      </span>
      <span class="error" *ngIf="hasError('epsilon', 'max')">
        Must be at most 0.5
      </span>
    </div>

    <div class="form-group checkbox-group">
      <label for="reducedMotion">
        <input
          id="reducedMotion"
          type="checkbox"
          formControlName="reducedMotionEnabled"
        />
        Reduced Motion Mode
      </label>
    </div>
  </section>

  <!-- Action Buttons -->
  <section class="controls-section actions">
    <button
      type="button"
      (click)="onRun()"
      [disabled]="!isFormDataValid() || isRunning"
      class="btn btn-primary"
    >
      Run
    </button>
    <button
      type="button"
      (click)="onReset()"
      [disabled]="!isRunning"
      class="btn btn-secondary"
    >
      Reset
    </button>
  </section>
</form>
